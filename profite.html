<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Profile - Murikimpano</title>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

  <!-- Firebase Configuration -->
  <script>
    const firebaseConfig = {
      apiKey: "ANDIKA_API_KEY_HANO",
      authDomain: "ANDIKA_AUTH_DOMAIN_HANO",
      projectId: "ANDIKA_PROJECT_ID_HANO",
      storageBucket: "ANDIKA_STORAGE_BUCKET_HANO",
      messagingSenderId: "ANDIKA_MESSAGING_ID_HANO",
      appId: "ANDIKA_APP_ID_HANO"
    };

    firebase.initializeApp(firebaseConfig);
  </script>
</head>

<body>
  <h2>Umwirondoro (Profile)</h2>

  <div id="userInfo">
    <p>Email yawe: <span id="userEmail"></span></p>
    <p>User ID yawe: <span id="userUID"></span></p>
  </div>

  <h3>Hindura Email</h3>
  <input type="email" id="newEmail" placeholder="Email nshya">
  <button onclick="changeEmail()">Hindura Email</button>

  <h3>Hindura Password</h3>
  <input type="password" id="newPassword" placeholder="Ijambo banga rishya">
  <button onclick="changePassword()">Hindura Password</button>

  <br><br>
  <button onclick="logout()">Sohoka</button>

  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        document.getElementById('userEmail').textContent = user.email;
        document.getElementById('userUID').textContent = user.uid;
      } else {
        window.location.href = "login.html";
      }
    });

    function changeEmail() {
      const newEmail = document.getElementById('newEmail').value;
      const user = firebase.auth().currentUser;

      user.updateEmail(newEmail).then(() => {
        alert("Email yahinduwe neza!");
      }).catch((error) => {
        alert("Ikosa: " + error.message);
      });
    }

    function changePassword() {
      const newPassword = document.getElementById('newPassword').value;
      const user = firebase.auth().currentUser;

      user.updatePassword(newPassword).then(() => {
        alert("Ijambo banga ryahinduwe neza!");
      }).catch((error) => {
        alert("Ikosa: " + error.message);
      });
    }

    function logout() {
      firebase.auth().signOut().then(() => {
        window.location.href = "login.html";
      });
    }
  </script>
</body>
</html>